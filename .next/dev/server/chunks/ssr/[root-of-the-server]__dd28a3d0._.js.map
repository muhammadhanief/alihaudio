{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 28, "column": 0}, "map": {"version":3,"sources":["file:///D:/2026/SID/Sistem%20Informasi/inialihaudio/alihaudio/lib/utils.ts"],"sourcesContent":["\r\n/**\r\n * Utility to handle basePath consistently across local dev and production.\r\n * This ensures fetch calls work regardless of whether you are on \r\n * http://localhost:3000/ or https://domain.com/alihaudio/\r\n */\r\n\r\nconst BASE_PATH = \"/alihaudio\";\r\n// const BASE_PATH = \"\";\r\n\r\nexport const getApiUrl = (endpoint: string) => {\r\n    let [path, query] = endpoint.split('?');\r\n    let cleanPath = path.startsWith(\"/\") ? path : `/${path}`;\r\n\r\n    // Fix for trailingSlash: true in next.config.js\r\n    // If it's a directory-based route (no file extension), add trailing slash\r\n    if (!cleanPath.endsWith('/')) {\r\n        const parts = cleanPath.split('/');\r\n        const lastPart = parts[parts.length - 1];\r\n        if (lastPart && !lastPart.includes('.')) {\r\n            cleanPath += '/';\r\n        }\r\n    }\r\n\r\n    const finalEndpoint = query ? `${cleanPath}?${query}` : cleanPath;\r\n    return `${BASE_PATH}${finalEndpoint}`;\r\n};\r\n\r\nexport const getAssetUrl = (path: string) => {\r\n    if (!path) return \"\";\r\n    if (path.startsWith(\"http\")) return path;\r\n\r\n    // REDIRECT: Paksa lewat API agar tidak kena 404 Apache/cPanel\r\n    if (path.startsWith(\"/uploads/audio/\")) {\r\n        const fileName = path.replace(\"/uploads/audio/\", \"\");\r\n        return `${BASE_PATH}/api/audio/${fileName}`;\r\n    }\r\n\r\n    const cleanPath = path.startsWith(\"/\") ? path : `/${path}`;\r\n    return `${BASE_PATH}${cleanPath}`;\r\n};\r\n"],"names":[],"mappings":";;;;;;AACA;;;;CAIC,GAED,MAAM,YAAY;AAGX,MAAM,YAAY,CAAC;IACtB,IAAI,CAAC,MAAM,MAAM,GAAG,SAAS,KAAK,CAAC;IACnC,IAAI,YAAY,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAExD,gDAAgD;IAChD,0EAA0E;IAC1E,IAAI,CAAC,UAAU,QAAQ,CAAC,MAAM;QAC1B,MAAM,QAAQ,UAAU,KAAK,CAAC;QAC9B,MAAM,WAAW,KAAK,CAAC,MAAM,MAAM,GAAG,EAAE;QACxC,IAAI,YAAY,CAAC,SAAS,QAAQ,CAAC,MAAM;YACrC,aAAa;QACjB;IACJ;IAEA,MAAM,gBAAgB,QAAQ,GAAG,UAAU,CAAC,EAAE,OAAO,GAAG;IACxD,OAAO,GAAG,YAAY,eAAe;AACzC;AAEO,MAAM,cAAc,CAAC;IACxB,IAAI,CAAC,MAAM,OAAO;IAClB,IAAI,KAAK,UAAU,CAAC,SAAS,OAAO;IAEpC,8DAA8D;IAC9D,IAAI,KAAK,UAAU,CAAC,oBAAoB;QACpC,MAAM,WAAW,KAAK,OAAO,CAAC,mBAAmB;QACjD,OAAO,GAAG,UAAU,WAAW,EAAE,UAAU;IAC/C;IAEA,MAAM,YAAY,KAAK,UAAU,CAAC,OAAO,OAAO,CAAC,CAAC,EAAE,MAAM;IAC1D,OAAO,GAAG,YAAY,WAAW;AACrC"}},
    {"offset": {"line": 69, "column": 0}, "map": {"version":3,"sources":["file:///D:/2026/SID/Sistem%20Informasi/inialihaudio/alihaudio/app/components/Sidebar.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useRouter, usePathname } from \"next/navigation\";\r\nimport {\r\n    LayoutDashboard,\r\n    Mic2,\r\n    History,\r\n    Globe,\r\n    Users,\r\n    LogOut,\r\n    Menu,\r\n    X,\r\n    UploadCloud,\r\n    Settings\r\n} from \"lucide-react\";\r\nimport { useState, useEffect } from \"react\";\r\nimport { getApiUrl } from \"@/lib/utils\";\r\n\r\ninterface SidebarProps {\r\n    user: any;\r\n}\r\n\r\nexport default function Sidebar({ user }: SidebarProps) {\r\n    const router = useRouter();\r\n    const pathname = usePathname();\r\n    const [isOpen, setIsOpen] = useState(false);\r\n\r\n    const isAdmin = user?.role === 'admin' || user?.role === 'superadmin';\r\n    const isSuperAdmin = user?.role === 'superadmin';\r\n\r\n    // Tutup sidebar saat route berubah (pada mobile)\r\n    useEffect(() => {\r\n        setIsOpen(false);\r\n    }, [pathname]);\r\n\r\n    // Tutup sidebar saat klik di luar (overlay)\r\n    const handleOverlayClick = () => setIsOpen(false);\r\n\r\n    const handleLogout = async () => {\r\n        setIsOpen(false);\r\n        if (user?.role === 'guest') {\r\n            router.push(\"/\");\r\n            return;\r\n        }\r\n        await fetch(getApiUrl(\"/api/auth/logout\"), { method: \"POST\" });\r\n        router.push(\"/\");\r\n    };\r\n\r\n    const navigate = (path: string) => {\r\n        setIsOpen(false);\r\n        router.push(path);\r\n    };\r\n\r\n    const isGuest = user?.role === 'guest';\r\n\r\n    const menuItems = isGuest\r\n        ? [\r\n            { name: \"Alih Audio\", icon: Mic2, path: \"/guest/converter\" },\r\n            { name: \"Alih Audio Saya\", icon: History, path: \"/guest/my-conversions\" },\r\n        ]\r\n        : [\r\n            { name: \"Beranda\", icon: LayoutDashboard, path: \"/dashboard\" },\r\n            { name: \"Alih Audio\", icon: Mic2, path: \"/converter\" },\r\n            { name: \"Upload Manual\", icon: UploadCloud, path: \"/upload-audio\" },\r\n            { name: \"Alih Audio Saya\", icon: History, path: \"/my-conversions\" },\r\n        ];\r\n\r\n    const adminItems = [\r\n        { name: \"Alih Audio Total\", icon: Globe, path: \"/admin/total\" },\r\n    ];\r\n\r\n    const superAdminItems = [\r\n        { name: \"Manajemen User\", icon: Users, path: \"/admin/users\" },\r\n        { name: \"Pengaturan\", icon: Settings, path: \"/admin/settings\" },\r\n    ];\r\n\r\n    const NavButton = ({ item }: { item: { name: string; icon: any; path: string } }) => {\r\n        const active = pathname === item.path;\r\n        return (\r\n            <button\r\n                onClick={() => navigate(item.path)}\r\n                className={`w-full flex items-center gap-3 px-4 py-3 rounded-xl transition-all text-left ${active\r\n                    ? 'bg-orange-600 text-white shadow-lg shadow-orange-600/20'\r\n                    : 'text-zinc-600 hover:bg-orange-50 hover:text-orange-600'\r\n                    }`}\r\n            >\r\n                <item.icon className={`h-5 w-5 flex-shrink-0 ${active ? 'text-white' : ''}`} />\r\n                <span className=\"text-sm font-semibold tracking-tight\">{item.name}</span>\r\n            </button>\r\n        );\r\n    };\r\n\r\n    const SidebarContent = () => (\r\n        <div className=\"flex flex-col h-full overflow-hidden\">\r\n            {/* Logo */}\r\n            <div className=\"px-5 py-5 flex items-center gap-3 border-b border-orange-100\">\r\n                <div className=\"p-2 rounded-xl bg-orange-600 shadow-lg shadow-orange-600/20 flex-shrink-0\">\r\n                    <Mic2 className=\"h-5 w-5 text-white\" />\r\n                </div>\r\n                <span className=\"text-xl font-bold tracking-tight text-zinc-900 uppercase\">Alih Audio</span>\r\n            </div>\r\n\r\n            {/* User Profile */}\r\n            <div className=\"px-5 py-4 border-b border-orange-50\">\r\n                <div className=\"flex items-center gap-3\">\r\n                    {user?.foto_url ? (\r\n                        <img\r\n                            src={user.foto_url}\r\n                            alt={user.nama}\r\n                            className=\"w-10 h-10 rounded-xl object-cover border border-orange-100 shadow-sm flex-shrink-0\"\r\n                        />\r\n                    ) : (\r\n                        <div className=\"w-10 h-10 rounded-xl bg-orange-100 flex items-center justify-center text-orange-600 font-semibold text-lg flex-shrink-0\">\r\n                            {user?.nama?.charAt(0)}\r\n                        </div>\r\n                    )}\r\n                    <div className=\"flex flex-col min-w-0\">\r\n                        <span className=\"text-sm font-bold text-zinc-900 leading-tight break-words whitespace-normal\">{user?.nama}</span>\r\n                        <span className=\"text-[11px] font-medium text-orange-600/70 uppercase tracking-tight mt-0.5\">{user?.role}</span>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n\r\n            {/* Navigation */}\r\n            <nav className=\"flex-1 overflow-y-auto px-3 py-4 space-y-5 min-h-0\">\r\n                <div className=\"space-y-1\">\r\n                    <label className=\"px-3 text-[10px] font-semibold text-zinc-400 uppercase tracking-widest\">Main Menu</label>\r\n                    <div className=\"space-y-1 mt-1\">\r\n                        {menuItems.map((item) => <NavButton key={item.path} item={item} />)}\r\n                    </div>\r\n                </div>\r\n\r\n                {isAdmin && (\r\n                    <div className=\"space-y-1\">\r\n                        <label className=\"px-3 text-[10px] font-semibold text-zinc-400 uppercase tracking-widest\">Admin Tools</label>\r\n                        <div className=\"space-y-1 mt-1\">\r\n                            {adminItems.map((item) => <NavButton key={item.path} item={item} />)}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n\r\n                {isSuperAdmin && (\r\n                    <div className=\"space-y-1\">\r\n                        <label className=\"px-3 text-[10px] font-semibold text-zinc-400 uppercase tracking-widest\">System</label>\r\n                        <div className=\"space-y-1 mt-1\">\r\n                            {superAdminItems.map((item) => <NavButton key={item.path} item={item} />)}\r\n                        </div>\r\n                    </div>\r\n                )}\r\n            </nav>\r\n\r\n            {/* Logout */}\r\n            <div className=\"p-3 border-t border-orange-50\">\r\n                <button\r\n                    onClick={handleLogout}\r\n                    className=\"w-full flex items-center gap-3 px-4 py-3 rounded-xl text-red-400 hover:bg-red-50 hover:text-red-500 transition-all group\"\r\n                >\r\n                    <LogOut className=\"h-5 w-5 group-hover:scale-110 transition-transform flex-shrink-0\" />\r\n                    <span className=\"text-sm font-semibold tracking-tight \">{isGuest ? 'Keluar Mode Tamu' : 'Logout'}</span>\r\n                </button>\r\n            </div>\r\n        </div>\r\n    );\r\n\r\n    return (\r\n        <>\r\n            {/* ─── DESKTOP: Sidebar Permanen ─── */}\r\n            <aside className=\"hidden md:flex fixed left-0 top-0 h-[100dvh] w-60 bg-white border-r border-orange-100 flex-col z-[100] shadow-xl\">\r\n                <SidebarContent />\r\n            </aside>\r\n\r\n            {/* ─── MOBILE: Hamburger Button ─── */}\r\n            <button\r\n                onClick={() => setIsOpen(true)}\r\n                className=\"md:hidden fixed top-4 left-4 z-[200] p-2.5 bg-white border border-orange-100 rounded-xl shadow-lg text-orange-600 hover:bg-orange-50 transition-all active:scale-95\"\r\n                aria-label=\"Buka menu\"\r\n            >\r\n                <Menu className=\"h-5 w-5\" />\r\n            </button>\r\n\r\n            {/* ─── MOBILE: Overlay backdrop ─── */}\r\n            {isOpen && (\r\n                <div\r\n                    className=\"md:hidden fixed inset-0 bg-black/40 backdrop-blur-sm z-[150] animate-fade-in\"\r\n                    onClick={handleOverlayClick}\r\n                />\r\n            )}\r\n\r\n            {/* ─── MOBILE: Slide-in Sidebar ─── */}\r\n            <aside\r\n                className={`md:hidden fixed left-0 top-0 h-[100dvh] w-72 bg-white z-[200] shadow-2xl transform transition-transform duration-200 ease-in-out flex flex-col ${isOpen ? 'translate-x-0' : '-translate-x-full'\r\n                    }`}\r\n            >\r\n                {/* Tombol tutup */}\r\n                <button\r\n                    onClick={() => setIsOpen(false)}\r\n                    className=\"absolute top-4 right-4 p-2 rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-100 transition-all z-10\"\r\n                    aria-label=\"Tutup menu\"\r\n                >\r\n                    <X className=\"h-5 w-5\" />\r\n                </button>\r\n\r\n                <SidebarContent />\r\n            </aside>\r\n        </>\r\n    );\r\n}\r\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 509, "column": 0}, "map": {"version":3,"sources":["file:///D:/2026/SID/Sistem%20Informasi/inialihaudio/alihaudio/app/%28dashboard%29/layout.tsx"],"sourcesContent":["\"use client\";\r\n\r\nimport { useState, useEffect } from \"react\";\r\nimport { useRouter } from \"next/navigation\";\r\nimport Sidebar from \"@/app/components/Sidebar\";\r\nimport { getApiUrl } from \"@/lib/utils\";\r\n\r\nexport default function DashboardLayout({\r\n    children,\r\n}: {\r\n    children: React.ReactNode;\r\n}) {\r\n    const router = useRouter();\r\n    const [user, setUser] = useState<any>(null);\r\n    const [loading, setLoading] = useState(true);\r\n\r\n    useEffect(() => {\r\n        fetch(getApiUrl(`/api/auth/session?_t=${Date.now()}`)).then(async res => {\r\n            if (!res.ok) {\r\n                router.push(\"/login\");\r\n            } else {\r\n                const data = await res.json();\r\n                setUser(data.user);\r\n                setLoading(false);\r\n            }\r\n        }).catch(() => {\r\n            router.push(\"/login\");\r\n        });\r\n    }, [router]);\r\n\r\n    if (loading) {\r\n        return (\r\n            <div className=\"min-h-screen flex items-center justify-center bg-[#fffaf5]\">\r\n                <div className=\"w-12 h-12 border-4 border-orange-500/20 border-t-orange-500 rounded-full animate-spin\" />\r\n            </div>\r\n        );\r\n    }\r\n\r\n    return (\r\n        <div className=\"min-h-screen bg-[#fffaf5] flex\">\r\n            <Sidebar user={user} />\r\n\r\n            {/* Main Content Area */}\r\n            {/* Mobile: full width (sidebar adalah overlay) */}\r\n            {/* Desktop: geser kanan sesuai lebar sidebar (w-60 = 15rem) */}\r\n            <main className=\"flex-1 w-full md:pl-60 transition-all duration-200 overflow-x-hidden\">\r\n                <div className=\"max-w-7xl mx-auto p-4 pt-16 md:pt-6 md:p-6\">\r\n                    {children}\r\n                </div>\r\n            </main>\r\n        </div>\r\n    );\r\n}\r\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAOe,SAAS,gBAAgB,EACpC,QAAQ,EAGX;IACG,MAAM,SAAS,IAAA,+IAAS;IACxB,MAAM,CAAC,MAAM,QAAQ,GAAG,IAAA,iNAAQ,EAAM;IACtC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,iNAAQ,EAAC;IAEvC,IAAA,kNAAS,EAAC;QACN,MAAM,IAAA,yHAAS,EAAC,CAAC,qBAAqB,EAAE,KAAK,GAAG,IAAI,GAAG,IAAI,CAAC,OAAM;YAC9D,IAAI,CAAC,IAAI,EAAE,EAAE;gBACT,OAAO,IAAI,CAAC;YAChB,OAAO;gBACH,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,QAAQ,KAAK,IAAI;gBACjB,WAAW;YACf;QACJ,GAAG,KAAK,CAAC;YACL,OAAO,IAAI,CAAC;QAChB;IACJ,GAAG;QAAC;KAAO;IAEX,IAAI,SAAS;QACT,qBACI,8OAAC;YAAI,WAAU;sBACX,cAAA,8OAAC;gBAAI,WAAU;;;;;;;;;;;IAG3B;IAEA,qBACI,8OAAC;QAAI,WAAU;;0BACX,8OAAC,wIAAO;gBAAC,MAAM;;;;;;0BAKf,8OAAC;gBAAK,WAAU;0BACZ,cAAA,8OAAC;oBAAI,WAAU;8BACV;;;;;;;;;;;;;;;;;AAKrB"}}]
}