(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[2663],{2690:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>f});var s=a(5155),r=a(2115),n=a(1878),i=a(4832),l=a(4980),o=a(7915),d=a(4514),c=a(2475),x=a(1503),u=a(6962);let p=(0,a(2806).A)("trash-2",[["path",{d:"M10 11v6",key:"nco0om"}],["path",{d:"M14 11v6",key:"outv1u"}],["path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6",key:"miytrc"}],["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M8 6V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2",key:"e791ji"}]]);var m=a(1337),h=a(5585),g=a(2967),b=a(9698);function f(){let[e,t]=(0,r.useState)([]),[a,f]=(0,r.useState)(!0),[j,w]=(0,r.useState)(null),[N,v]=(0,r.useState)(null),[k,y]=(0,r.useState)(!1),[_,A]=(0,r.useState)(null),{search:C,setSearch:S,sortConfig:D,toggleSort:M,filteredAndSorted:$}=(0,g.H)(e,["judul","text_input","user_nama","user_satker"]),E=({columnKey:e})=>(0,s.jsx)(b.y,{columnKey:e,sortConfig:D}),T=()=>{fetch((0,m.e)(`/api/admin/conversions?t=${Date.now()}`),{headers:{"Cache-Control":"no-cache"}}).then(async e=>{e.ok&&(t((await e.json()).conversions),f(!1))}).catch(()=>f(!1))};(0,r.useEffect)(()=>(fetch((0,m.e)(`/api/auth/session?_t=${Date.now()}`)).then(async e=>{e.ok&&A((await e.json()).user)}),T(),window.addEventListener("focus",T),()=>window.removeEventListener("focus",T)),[]);let H=async e=>{if(confirm("Apakah Anda yakin ingin menghapus konversi ini beserta audionya?"))try{let a=await fetch((0,m.e)(`/api/admin/conversions/${e}`),{method:"DELETE"}),s=await a.json();a.ok&&s.success?t(t=>t.filter(t=>t.id!==e)):alert(`Gagal menghapus: ${s.error||"Terjadi kesalahan server"}`)}catch(e){console.error("Delete Error:",e),alert("Terjadi kesalahan sistem saat menghubungi server.")}},L=e=>{let t=`${window.location.origin}${(0,m.s)(e.audio_path)}`,a=`<div style="display: flex; align-items: center;"><span style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Helvetica, Arial, sans-serif; font-size: 14px; background-color: rgb(255, 255, 255);"><b>Berita Versi Audio</b></span><audio controls="" class="custom-audio" style="width: 150px; margin-left: 20px; font-family: Arial, Verdana; font-size: 10pt;"><source src="${t}" type="audio/mpeg"> </audio> </div>`;navigator.clipboard.writeText(a).then(()=>{w(e.id),setTimeout(()=>w(null),2e3)})};return(0,s.jsxs)("div",{className:"space-y-5 animate-fade-in",children:[(0,s.jsxs)("div",{children:[(0,s.jsx)("h1",{className:"text-2xl md:text-4xl font-bold text-orange-950 tracking-tight uppercase",children:"Alih Audio Total"}),(0,s.jsxs)("p",{className:"text-orange-900/50 text-xs font-semibold uppercase tracking-widest mt-1",children:["Rekap seluruh konversi sistem",e.length>0&&(0,s.jsxs)("span",{className:"ml-2 px-2 py-0.5 bg-orange-100 text-orange-600 rounded-full text-[9px] font-bold",children:[e.length," data"]})]})]}),(0,s.jsxs)("div",{className:"relative",children:[(0,s.jsx)(n.A,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-4 w-4 text-orange-400 pointer-events-none"}),(0,s.jsx)("input",{type:"text",placeholder:"Cari judul, teks, nama pengguna, atau satker...",value:C,onChange:e=>S(e.target.value),className:"w-full pl-11 pr-5 py-3.5 rounded-2xl border border-orange-200/60 text-sm font-medium shadow-sm outline-none focus:ring-2 focus:ring-orange-500/20 focus:border-orange-500/40 transition-all",style:{color:"#1c0a00",backgroundColor:"rgba(255,255,255,0.85)"}}),C&&(0,s.jsxs)("span",{className:"absolute right-4 top-1/2 -translate-y-1/2 text-[10px] font-medium text-orange-900/40 uppercase tracking-wider",children:[$.length," hasil"]})]}),a&&(0,s.jsxs)("div",{className:"glass rounded-[32px] p-24 flex flex-col items-center justify-center gap-4 text-orange-600 border border-orange-200/50",children:[(0,s.jsx)("div",{className:"w-10 h-10 border-4 border-orange-200 border-t-orange-600 rounded-full animate-[spin_0.8s_linear_infinite]"}),(0,s.jsx)("p",{className:"text-[10px] font-bold uppercase tracking-widest text-orange-900/40 animate-[pulse_1.5s_cubic-bezier(0.4,0,0.6,1)_infinite]",children:"Memuat Data..."})]}),!a&&0===$.length&&(0,s.jsxs)("div",{className:"glass rounded-[32px] p-16 flex flex-col items-center gap-4 text-orange-900/20 border border-orange-200/50",children:[(0,s.jsx)(i.A,{className:"h-12 w-12"}),(0,s.jsx)("p",{className:"text-sm font-semibold uppercase tracking-widest",children:C?"Tidak ada hasil ditemukan":"Belum ada data konversi"})]}),!a&&$.length>0&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("div",{className:"md:hidden space-y-3",children:$.map(e=>(0,s.jsxs)("div",{className:"glass rounded-[24px] p-4 border border-orange-200/50 shadow-sm space-y-3",children:[e.judul&&(0,s.jsx)("span",{className:"text-sm font-semibold text-orange-950 leading-snug block",children:e.judul}),(0,s.jsxs)("div",{className:"flex items-start justify-between gap-2",children:[(0,s.jsxs)("div",{className:"flex items-center gap-2 min-w-0",children:[(0,s.jsx)("div",{className:"w-8 h-8 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600 font-semibold text-sm flex-shrink-0 overflow-hidden",children:e.user_foto_url?(0,s.jsx)("img",{src:e.user_foto_url,alt:e.user_nama,className:"w-full h-full object-cover"}):e.user_nama?.charAt(0)??"?"}),(0,s.jsxs)("div",{className:"min-w-0",children:[(0,s.jsx)("div",{className:"text-[11px] font-semibold text-orange-950 truncate",children:e.user_nama}),(0,s.jsx)("div",{className:"text-[9px] font-medium text-orange-900/40 truncate",children:e.user_satker})]})]}),(0,s.jsx)("span",{className:`px-2.5 py-1 rounded-lg text-[9px] font-semibold uppercase tracking-wider flex-shrink-0 ${"puter"===e.mode?"bg-orange-100 text-orange-600":"bg-amber-100 text-amber-700"}`,children:"puter"===e.mode?"♂ Laki-laki":"♀ Perempuan"})]}),(0,s.jsxs)("div",{className:"flex items-center gap-1.5 text-[10px] font-medium text-orange-900/40 uppercase",suppressHydrationWarning:!0,children:[(0,s.jsx)(l.A,{className:"h-3 w-3"}),new Date(e.created_at).toLocaleString("id-ID")]}),e.text_input&&(0,s.jsxs)("p",{className:"text-xs text-orange-900/60 font-medium italic leading-relaxed line-clamp-2 px-1 border-l-2 border-orange-200",children:['"',e.text_input,'"']}),e.audio_path&&(0,s.jsxs)("div",{className:"flex items-center gap-2 pt-1",children:[(0,s.jsxs)("button",{onClick:()=>{v(e),y(!0)},className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-xl bg-orange-500 text-white hover:bg-orange-600 transition-all duration-100 text-[10px] font-semibold uppercase tracking-wider shadow-sm",children:[(0,s.jsx)(o.A,{className:"h-3.5 w-3.5"}),"Detail"]}),(0,s.jsxs)("button",{onClick:()=>L(e),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-xl text-[10px] font-bold uppercase tracking-wider transition-all ${j===e.id?"bg-green-500 text-white":"bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white"}`,children:[j===e.id?(0,s.jsx)(d.A,{className:"h-3.5 w-3.5"}):(0,s.jsx)(c.A,{className:"h-3.5 w-3.5"}),j===e.id?"Tersalin!":"Salin HTML"]}),(0,s.jsxs)("a",{href:(0,m.s)(e.audio_path),target:"_blank",className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-600 hover:text-white transition-all text-[10px] font-bold uppercase tracking-wider",children:[(0,s.jsx)(x.A,{className:"h-3.5 w-3.5"}),"Putar"]}),(0,s.jsxs)("a",{href:(0,m.s)(e.audio_path),download:!0,className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-xl bg-zinc-900 text-white hover:bg-zinc-700 transition-all text-[10px] font-bold uppercase tracking-wider",children:[(0,s.jsx)(u.A,{className:"h-3.5 w-3.5"}),"Unduh"]}),_?.role==="superadmin"&&(0,s.jsxs)("button",{onClick:()=>H(e.id),className:"flex-1 flex items-center justify-center gap-1.5 py-2 rounded-xl bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition-all text-[10px] font-bold uppercase tracking-wider",title:"Hapus",children:[(0,s.jsx)(p,{className:"h-3.5 w-3.5"}),"Hapus"]})]})]},e.id))}),(0,s.jsx)("div",{className:"hidden md:block glass rounded-[40px] overflow-hidden shadow-xl border border-orange-200/50",children:(0,s.jsx)("div",{className:"overflow-x-auto",children:(0,s.jsxs)("table",{className:"w-full text-left border-collapse min-w-[800px]",children:[(0,s.jsx)("thead",{children:(0,s.jsxs)("tr",{className:"bg-orange-500/5 border-b border-orange-100",children:[(0,s.jsxs)("th",{className:"px-6 py-4 text-[10px] font-semibold text-orange-900/40 uppercase tracking-widest cursor-pointer group hover:bg-orange-500/10 transition-colors",onClick:()=>M("created_at"),children:["Waktu ",(0,s.jsx)(E,{columnKey:"created_at"})]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-[10px] font-semibold text-orange-900/40 uppercase tracking-widest cursor-pointer group hover:bg-orange-500/10 transition-colors",onClick:()=>M("user_nama"),children:["Nama ",(0,s.jsx)(E,{columnKey:"user_nama"})]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-[10px] font-semibold text-orange-900/40 uppercase tracking-widest cursor-pointer group hover:bg-orange-500/10 transition-colors",onClick:()=>M("judul"),children:["Judul ",(0,s.jsx)(E,{columnKey:"judul"})]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-[10px] font-semibold text-orange-900/40 uppercase tracking-widest cursor-pointer group hover:bg-orange-500/10 transition-colors",onClick:()=>M("mode"),children:["Mode ",(0,s.jsx)(E,{columnKey:"mode"})]}),(0,s.jsxs)("th",{className:"px-6 py-4 text-[10px] font-semibold text-orange-900/40 uppercase tracking-widest cursor-pointer group hover:bg-orange-500/10 transition-colors",onClick:()=>M("text_input"),children:["Teks ",(0,s.jsx)(E,{columnKey:"text_input"})]}),(0,s.jsx)("th",{className:"px-6 py-4 text-[10px] font-semibold text-orange-900/40 uppercase tracking-widest text-center",children:"Aksi"})]})}),(0,s.jsx)("tbody",{children:$.map(e=>(0,s.jsxs)("tr",{className:"border-b border-orange-50/50 hover:bg-orange-50/30 transition-colors",children:[(0,s.jsx)("td",{className:"px-6 py-4 text-[11px] font-medium text-orange-950",suppressHydrationWarning:!0,children:new Date(e.created_at).toLocaleString("id-ID")}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsxs)("div",{className:"flex items-center gap-2.5",children:[(0,s.jsx)("div",{className:"w-7 h-7 rounded-lg bg-orange-100 flex items-center justify-center text-orange-600 font-semibold text-[11px] flex-shrink-0 overflow-hidden",children:e.user_foto_url?(0,s.jsx)("img",{src:e.user_foto_url,alt:e.user_nama,className:"w-full h-full object-cover"}):e.user_nama?.charAt(0)??"?"}),(0,s.jsxs)("div",{className:"flex flex-col min-w-0",children:[(0,s.jsx)("span",{className:"text-[11px] font-semibold text-orange-950 truncate",children:e.user_nama}),(0,s.jsx)("span",{className:"text-[9px] font-medium text-orange-900/40 truncate",children:e.user_satker})]})]})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("p",{className:"text-sm font-semibold text-orange-950 max-w-[180px] truncate",children:e.judul||(0,s.jsx)("span",{className:"text-orange-900/20 italic font-medium text-xs",children:"—"})})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("span",{className:`px-2 py-1 rounded text-[9px] font-semibold uppercase tracking-wider ${"puter"===e.mode?"bg-orange-100 text-orange-600":"bg-amber-100 text-amber-600"}`,children:"puter"===e.mode?"♂ Laki-laki":"♀ Perempuan"})}),(0,s.jsx)("td",{className:"px-6 py-4",children:(0,s.jsx)("p",{className:"text-[11px] text-orange-900/70 truncate max-w-[200px]",children:e.text_input})}),(0,s.jsx)("td",{className:"px-6 py-4 text-right",children:(0,s.jsxs)("div",{className:"flex justify-end gap-2",children:[(0,s.jsx)("button",{onClick:()=>{v(e),y(!0)},className:"p-2 rounded-xl bg-orange-500 text-white hover:bg-orange-600 transition-all duration-100 shadow-lg shadow-orange-500/20",title:"Lihat Detail",children:(0,s.jsx)(o.A,{className:"h-4 w-4"})}),e.audio_path&&(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)("button",{onClick:()=>L(e),className:`p-2 rounded-xl transition-all shadow-sm flex items-center gap-1.5 ${j===e.id?"bg-green-500 text-white":"bg-blue-50 text-blue-600 hover:bg-blue-600 hover:text-white"}`,title:"Salin untuk Backend",children:j===e.id?(0,s.jsx)(d.A,{className:"h-4 w-4"}):(0,s.jsx)(c.A,{className:"h-4 w-4"})}),(0,s.jsx)("a",{href:(0,m.s)(e.audio_path),target:"_blank",className:"p-2 rounded-xl bg-orange-50 text-orange-600 hover:bg-orange-600 hover:text-white transition-all shadow-sm",title:"Buka Audio",children:(0,s.jsx)(x.A,{className:"h-4 w-4"})}),(0,s.jsx)("a",{href:(0,m.s)(e.audio_path),download:!0,className:"p-2 rounded-xl bg-zinc-900 text-white hover:bg-zinc-800 transition-all shadow-xl shadow-black/10",title:"Unduh MP3",children:(0,s.jsx)(u.A,{className:"h-4 w-4"})}),_?.role==="superadmin"&&(0,s.jsx)("button",{onClick:()=>H(e.id),className:"p-2 rounded-xl bg-red-50 text-red-600 hover:bg-red-600 hover:text-white transition-all shadow-sm",title:"Hapus Konversi",children:(0,s.jsx)(p,{className:"h-4 w-4"})})]})]})})]},e.id))})]})})})]}),(0,s.jsx)(h.A,{isOpen:k,onClose:()=>y(!1),conversion:N,isAdminMode:!0})]})}},8596:(e,t,a)=>{Promise.resolve().then(a.bind(a,2690))}},e=>{e.O(0,[4404,8441,3794,7358],()=>e(e.s=8596)),_N_E=e.O()}]);